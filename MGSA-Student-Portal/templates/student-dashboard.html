{% load static %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard - MGSA</title>
    
    <!-- CSS Stylesheets -->
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <link rel="stylesheet" href="{% static 'css/theme.css' %}">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="dashboard">
    <!-- Dashboard Container -->
    <div class="dashboard-container">
        <!-- Dashboard Header -->
        <header class="dashboard-header">
            <div class="container">
                <div class="dashboard-nav">
                    <div class="logo">
                        <img src="{% static 'assets/images/mgsalogo.jpg' %}" alt="MGSA Logo" />
                        <span>MGSA Student Dashboard</span>
                    </div>
                    <div class="header-controls">
                        <button id="theme-toggle" class="theme-toggle" title="Toggle theme">
                            <i class="fas fa-moon"></i>
                        </button>
                        <button id="language-toggle" class="language-toggle" title="Toggle language">
                            EN
                        </button>
                        <div class="user-menu">
                            <span class="user-greeting">Hello, {{ user.get_full_name|default:user.email }}</span>
                            <a href="{% url 'logout' %}" class="logout-btn" title="Logout">
                                <i class="fas fa-sign-out-alt"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Dashboard Layout -->
        <div class="dashboard-layout">
            <!-- Dashboard Sidebar -->
            <aside class="dashboard-sidebar">
                <ul class="sidebar-menu">
                    <li class="sidebar-item">
                        <a href="#feedback" class="sidebar-link" data-section="feedback">
                            <span class="sidebar-icon"><i class="fas fa-comments"></i></span>
                            <span>Feedback</span>
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#overview" class="sidebar-link active" data-section="overview">
                            <span class="sidebar-icon"><i class="fas fa-chart-bar"></i></span>
                            <span>Overview</span>
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#posts" class="sidebar-link" data-section="posts">
                            <span class="sidebar-icon"><i class="fas fa-newspaper"></i></span>
                            <span>Posts</span>
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#resources" class="sidebar-link" data-section="resources">
                            <span class="sidebar-icon"><i class="fas fa-book"></i></span>
                            <span>Resources</span>
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#tutorials" class="sidebar-link" data-section="tutorials">
                            <span class="sidebar-icon"><i class="fas fa-graduation-cap"></i></span>
                            <span>Tutorials</span>
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#profile" class="sidebar-link" data-section="profile">
                            <span class="sidebar-icon"><i class="fas fa-user"></i></span>
                            <span>Profile</span>
                        </a>
                    </li>
                </ul>
            </aside>

            <!-- Main Content -->
            <main class="dashboard-main">
                <div class="container">
                    <!-- Messages Display -->
                    {% if messages %}
                    <div class="messages-container">
                        {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                            <div class="alert-content">
                                {% if message.tags == 'success' %}
                                    <i class="fas fa-check-circle"></i>
                                {% elif message.tags == 'error' %}
                                    <i class="fas fa-exclamation-circle"></i>
                                {% elif message.tags == 'warning' %}
                                    <i class="fas fa-exclamation-triangle"></i>
                                {% else %}
                                    <i class="fas fa-info-circle"></i>
                                {% endif %}
                                <span>{{ message }}</span>
                            </div>
                            <button type="button" class="close-alert" aria-label="Close">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    <!-- Overview Section -->
                    <section id="overview" class="dashboard-section active">
                        <!-- Welcome Section -->
                        <div class="dashboard-welcome animate-fade-in">
                            <div class="welcome-content">
                                <h1>Welcome back, {{ user.first_name|default:"Student" }}! ðŸ‘‹</h1>
                                <p>Stay updated with the latest from MGSA</p>
                                <div class="welcome-stats">
                                    <div class="stat-badge">
                                        <i class="fas fa-book-open"></i>
                                        <span>{{ tutorials_count }} Tutorials</span>
                                    </div>
                                    <div class="stat-badge">
                                        <i class="fas fa-download"></i>
                                        <span>{{ resources_count }} Resources</span>
                                    </div>
                                </div>
                            </div>
                            <div class="welcome-illustration">
                                <div class="floating-element">
                                    <i class="fas fa-graduation-cap"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Stats -->
                        <div class="stats-grid">
                            <div class="stat-card animate-slide-up" style="animation-delay: 0.1s">
                                <div class="stat-icon new-posts">
                                    <i class="fas fa-newspaper"></i>
                                </div>
                                <div class="stat-content">
                                    <span class="stat-number">{{ new_posts_count }}</span>
                                    <span class="stat-label">New Posts</span>
                                </div>
                            </div>
                            <div class="stat-card animate-slide-up" style="animation-delay: 0.2s">
                                <div class="stat-icon resources">
                                    <i class="fas fa-download"></i>
                                </div>
                                <div class="stat-content">
                                    <span class="stat-number">{{ resources_count }}</span>
                                    <span class="stat-label">Resources</span>
                                </div>
                            </div>
                            <div class="stat-card animate-slide-up" style="animation-delay: 0.3s">
                                <div class="stat-icon tutorials">
                                    <i class="fas fa-book"></i>
                                </div>
                                <div class="stat-content">
                                    <span class="stat-number">{{ tutorials_count }}</span>
                                    <span class="stat-label">Tutorials</span>
                                </div>
                            </div>
                            <div class="stat-card animate-slide-up" style="animation-delay: 0.4s">
                                <div class="stat-icon events">
                                    <i class="fas fa-calendar"></i>
                                </div>
                                <div class="stat-content">
                                    <span class="stat-number">{{ events_count }}</span>
                                    <span class="stat-label">Events</span>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="quick-actions">
                            <h3>Quick Actions</h3>
                            <div class="actions-grid">
                                <a href="#tutorials" class="action-card" data-section="tutorials">
                                    <div class="action-icon">
                                        <i class="fas fa-book"></i>
                                    </div>
                                    <span>Register for Tutorials</span>
                                </a>
                                <a href="#resources" class="action-card" data-section="resources">
                                    <div class="action-icon">
                                        <i class="fas fa-download"></i>
                                    </div>
                                    <span>Download Resources</span>
                                </a>
                                <a href="#feedback" class="action-card" data-section="feedback">
                                    <div class="action-icon">
                                        <i class="fas fa-comment"></i>
                                    </div>
                                    <span>Give Feedback</span>
                                </a>
                                <a href="#profile" class="action-card" data-section="profile">
                                    <div class="action-icon">
                                        <i class="fas fa-user-edit"></i>
                                    </div>
                                    <span>Update Profile</span>
                                </a>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="recent-activity">
                            <div class="activity-header">
                                <h3>Recent Announcements</h3>
                                <a href="#posts" class="view-all" data-section="posts">View All</a>
                            </div>
                            <div class="activity-list">
                                {% for post in recent_posts|slice:":3" %}
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-newspaper"></i>
                                    </div>
                                    <div class="activity-content">
                                        <h4>{{ post.title }}</h4>
                                        <p>{{ post.content|truncatewords:20 }}</p>
                                        <span class="activity-time">{{ post.created_at|timesince }} ago</span>
                                    </div>
                                </div>
                                {% empty %}
                                <div class="no-activity">
                                    <i class="fas fa-inbox"></i>
                                    <p>No recent activity</p>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </section>

                    <!-- Posts Section -->
                    <section id="posts" class="dashboard-section">
                        <div class="section-header">
                            <h2>Latest Posts & Announcements</h2>
                            <p>Stay updated with the latest news and announcements</p>
                        </div>

                        <div class="posts-feed">
                            {% for post in recent_posts %}
                            <article class="post-card animate-fade-in">
                                <div class="post-header">
                                    <div class="post-meta">
                                        <h3>{{ post.title }}</h3>
                                        <div class="post-info">
                                            <span class="post-author">
                                                <i class="fas fa-user"></i>
                                                {{ post.author.get_full_name|default:post.author.email }}
                                            </span>
                                            <span class="post-date">
                                                <i class="fas fa-calendar"></i>
                                                {{ post.created_at|date:"M d, Y" }}
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                <div class="post-content">
                                    <p>{{ post.content }}</p>
                                </div>

                                <div class="post-actions">
                                    <button class="post-action like-btn" data-post-id="{{ post.id }}">
                                        <i class="fas fa-heart"></i>
                                        <span class="like-count">{{ post.likes.count }}</span>
                                    </button>

                                    <button class="post-action comment-toggle" data-post-id="{{ post.id }}">
                                        <i class="fas fa-comment"></i>
                                        <span class="comment-count">{{ post.comments.count }}</span>
                                    </button>

                                    <button class="post-action share-btn" data-post-id="{{ post.id }}">
                                        <i class="fas fa-share"></i>
                                        <span>Share</span>
                                    </button>
                                </div>

                                <!-- Comments Section -->
                                <div class="comments-section" id="comments-{{ post.id }}" style="display: none;">
                                    <div class="add-comment">
                                        <form class="comment-form" data-post-id="{{ post.id }}">
                                            {% csrf_token %}
                                            <div class="comment-input-group">
                                                <input type="text" 
                                                       name="content" 
                                                       placeholder="Write a comment..." 
                                                       class="comment-input"
                                                       required>
                                                <button type="submit" class="comment-submit">
                                                    <i class="fas fa-paper-plane"></i>
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="comments-list" id="comments-list-{{ post.id }}">
                                        <!-- Comments loaded via AJAX -->
                                    </div>
                                </div>
                            </article>
                            {% empty %}
                            <div class="empty-state">
                                <i class="fas fa-newspaper"></i>
                                <h3>No posts available</h3>
                                <p>Check back later for new announcements</p>
                            </div>
                            {% endfor %}
                        </div>
                    </section>

                    <!-- Resources Section -->
                    <section id="resources" class="dashboard-section">
                        <div class="section-header">
                            <h2>Learning Resources</h2>
                            <p>Download study materials and resources</p>
                        </div>

                        <div class="resources-grid">
                            {% for resource in resources %}
                            <div class="resource-card animate-slide-up">
                                <div class="resource-icon">
                                    <i class="fas fa-file-{% if resource.file %}pdf{% else %}link{% endif %}"></i>
                                </div>
                                <div class="resource-content">
                                    <h3>{{ resource.title }}</h3>
                                    <p>{{ resource.description|default:"No description available" }}</p>
                                    <div class="resource-meta">
                                        <span class="download-count">
                                            <i class="fas fa-download"></i>
                                            {{ resource.download_count }} downloads
                                        </span>
                                        <span class="resource-size">
                                            {{ resource.file.size|filesizeformat|default:"Link" }}
                                        </span>
                                    </div>
                                </div>
                                <div class="resource-actions">
                                    {% if resource.file %}
                                    <a href="{{ resource.file.url }}" 
                                       class="download-btn" 
                                       download 
                                       data-resource-id="{{ resource.id }}">
                                        <i class="fas fa-download"></i>
                                        Download
                                    </a>
                                    {% elif resource.file_url %}
                                    <a href="{{ resource.file_url }}" 
                                       class="download-btn" 
                                       target="_blank">
                                        <i class="fas fa-external-link-alt"></i>
                                        Open Link
                                    </a>
                                    {% endif %}
                                </div>
                            </div>
                            {% empty %}
                            <div class="empty-state">
                                <i class="fas fa-folder-open"></i>
                                <h3>No resources available</h3>
                                <p>Resources will be added soon</p>
                            </div>
                            {% endfor %}
                        </div>
                    </section>

                    <!-- Tutorials Section -->
                    <section id="tutorials" class="dashboard-section">
                        <div class="tutorials-layout">
                            <!-- My Tutorials -->
                            <div class="my-tutorials">
                                <div class="section-header">
                                    <h2>My Tutorial Registrations</h2>
                                    <p>Manage your tutorial sessions</p>
                                </div>

                                {% if user_registrations %}
                                <div class="registrations-list">
                                    {% for registration in user_registrations %}
                                    <div class="registration-card">
                                        <div class="registration-info">
                                            <h3>{{ registration.tutorial.title }}</h3>
                                            <p>{{ registration.tutorial.description|default:"No description" }}</p>
                                            <div class="tutorial-meta">
                                                <span class="tutorial-date">
                                                    <i class="fas fa-calendar"></i>
                                                    {{ registration.tutorial.start_date|date:"M d, Y" }}
                                                </span>
                                                <span class="registration-status status-{{ registration.status }}">
                                                    {{ registration.status|title }}
                                                </span>
                                            </div>
                                        </div>
                                        {% if registration.status == 'registered' %}
                                        <form method="POST" action="{% url 'cancel_tutorial_registration' registration.id %}" class="cancel-form">
                                            {% csrf_token %}
                                            <button type="submit" class="cancel-btn" 
                                                    onclick="return confirm('Are you sure you want to cancel this registration?')">
                                                <i class="fas fa-times"></i>
                                                Cancel
                                            </button>
                                        </form>
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                                </div>
                                {% else %}
                                <div class="empty-state">
                                    <i class="fas fa-book"></i>
                                    <h3>No tutorial registrations</h3>
                                    <p>Register for tutorials below to get started</p>
                                </div>
                                {% endif %}
                            </div>

                            <!-- Available Tutorials -->
                            <div class="available-tutorials">
                                <div class="section-header">
                                    <h2>Available Tutorials</h2>
                                    <p>Register for upcoming tutorial sessions</p>
                                </div>

                                <div class="tutorials-grid">
                                    {% for tutorial in available_tutorials %}
                                    <div class="tutorial-card">
                                        <div class="tutorial-header">
                                            <h3>{{ tutorial.title }}</h3>
                                            {% if tutorial.is_full %}
                                            <span class="tutorial-badge full">Full</span>
                                            {% elif tutorial.is_registered %}
                                            <span class="tutorial-badge registered">Registered</span>
                                            {% endif %}
                                        </div>
                                        
                                        <p class="tutorial-description">{{ tutorial.description|default:"No description available" }}</p>
                                        
                                        <div class="tutorial-details">
                                            <div class="detail-item">
                                                <i class="fas fa-calendar"></i>
                                                <span>{{ tutorial.start_date|date:"M d, Y" }}</span>
                                            </div>
                                            {% if tutorial.duration %}
                                            <div class="detail-item">
                                                <i class="fas fa-clock"></i>
                                                <span>{{ tutorial.duration }}</span>
                                            </div>
                                            {% endif %}
                                            {% if tutorial.max_students %}
                                            <div class="detail-item">
                                                <i class="fas fa-users"></i>
                                                <span>{{ tutorial.current_registrations_count }}/{{ tutorial.max_students }}</span>
                                            </div>
                                            {% endif %}
                                        </div>

                                        <div class="tutorial-actions">
                                            {% if tutorial.is_registered %}
                                            <button class="btn btn-disabled" disabled>
                                                <i class="fas fa-check"></i>
                                                Registered
                                            </button>
                                            {% elif tutorial.is_full %}
                                            <button class="btn btn-disabled" disabled>
                                                <i class="fas fa-times"></i>
                                                Full
                                            </button>
                                            {% else %}
                                            <form method="POST" action="{% url 'register_tutorial' %}" class="register-form">
                                                {% csrf_token %}
                                                <input type="hidden" name="tutorial_id" value="{{ tutorial.id }}">
                                                <button type="submit" class="btn btn-primary">
                                                    <i class="fas fa-plus"></i>
                                                    Register
                                                </button>
                                            </form>
                                            {% endif %}
                                        </div>
                                    </div>
                                    {% empty %}
                                    <div class="empty-state">
                                        <i class="fas fa-book-open"></i>
                                        <h3>No tutorials available</h3>
                                        <p>New tutorials will be added soon</p>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Profile Section -->
                    <section id="profile" class="dashboard-section">
                        <div class="profile-layout">
                            <!-- Profile Header -->
                            <div class="profile-header">
                                <div class="profile-avatar">
                                    <img src="{% static 'images/default-avatar.png' %}" alt="Profile" />
                                    <div class="avatar-overlay">
                                        <i class="fas fa-camera"></i>
                                    </div>
                                </div>
                                <div class="profile-info">
                                    <h1>{{ user.get_full_name|default:user.email }}</h1>
                                    <p class="profile-role">Student Member</p>
                                    <div class="profile-stats">
                                        <div class="stat">
                                            <span class="stat-number">{{ tutorials_count }}</span>
                                            <span class="stat-label">Tutorials</span>
                                        </div>
                                        <div class="stat">
                                            <span class="stat-number">{{ resources_count }}</span>
                                            <span class="stat-label">Resources</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Profile Form -->
                            <div class="profile-form-container">
                                <form method="POST" class="profile-form">
                                    {% csrf_token %}
                                    <input type="hidden" name="action" value="update_profile">
                                    
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label for="first_name">First Name</label>
                                            <input type="text" id="first_name" name="first_name" 
                                                   value="{{ user.first_name }}" class="form-input">
                                        </div>
                                        <div class="form-group">
                                            <label for="last_name">Last Name</label>
                                            <input type="text" id="last_name" name="last_name" 
                                                   value="{{ user.last_name }}" class="form-input">
                                        </div>
                                        <div class="form-group">
                                            <label for="email">Email</label>
                                            <input type="email" id="email" value="{{ user.email }}" 
                                                   class="form-input" disabled>
                                            <small>Contact admin to change email</small>
                                        </div>
                                        <div class="form-group">
                                            <label for="phone">Phone</label>
                                            <input type="tel" id="phone" name="phone" 
                                                   value="{{ user.phone|default:'' }}" class="form-input">
                                        </div>
                                        <div class="form-group">
                                            <label for="department">Department</label>
                                            <input type="text" id="department" name="department" 
                                                   value="{{ user.department|default:'' }}" class="form-input">
                                        </div>
                                        <div class="form-group">
                                            <label for="year_of_study">Year of Study</label>
                                            <input type="text" id="year_of_study" name="year_of_study" 
                                                   value="{{ user.year_of_study|default:'' }}" class="form-input">
                                        </div>
                                    </div>

                                    <div class="form-group full-width">
                                        <label for="bio">Bio</label>
                                        <textarea id="bio" name="bio" class="form-textarea" 
                                                  rows="4">{{ user.bio|default:'' }}</textarea>
                                    </div>

                                    <div class="form-actions">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save"></i>
                                            Update Profile
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </section>

                    <!-- Feedback Section -->
                    <section id="feedback" class="dashboard-section">
                        <div class="feedback-container">
                            <div class="section-header">
                                <h2>Feedback & Suggestions</h2>
                                <p>Share your thoughts, suggestions, or report issues. We value your feedback!</p>
                            </div>

                            <!-- Feedback Form -->
                            <div class="feedback-form-container">
                                <form method="POST" id="feedback-form" class="feedback-form">
                                    {% csrf_token %}
                                    <input type="hidden" name="action" value="submit_feedback">
                                    
                                    <div class="form-group">
                                        <label for="feedback-type" class="form-label">Feedback Type</label>
                                        <select id="feedback-type" name="type" class="form-select" required>
                                            <option value="">Select Type</option>
                                            <option value="suggestion">Suggestion</option>
                                            <option value="issue">Issue Report</option>
                                            <option value="compliment">Compliment</option>
                                            <option value="general">General Feedback</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="feedback-subject" class="form-label">Subject</label>
                                        <input type="text" id="feedback-subject" name="subject" 
                                               class="form-input" required maxlength="100"
                                               placeholder="Enter subject">
                                    </div>

                                    <div class="form-group">
                                        <label for="feedback-message" class="form-label">Message</label>
                                        <textarea id="feedback-message" name="message" class="form-textarea" 
                                                  rows="6" required maxlength="1000"
                                                  placeholder="Write your feedback here..."></textarea>
                                        <div class="char-count">
                                            <span id="char-counter">0</span>/1000 characters
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="anonymous" id="anonymous-feedback">
                                            <span class="checkmark"></span>
                                            Submit anonymously
                                        </label>
                                    </div>

                                    <div class="form-actions">
                                        <button type="submit" class="btn btn-primary btn-full">
                                            <i class="fas fa-paper-plane"></i>
                                            Submit Feedback
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <!-- Previous Feedback -->
                            <div class="previous-feedback">
                                <h3>Your Previous Feedback</h3>
                                <div class="feedback-list">
                                    {% for feedback in user_feedback %}
                                    <div class="feedback-item">
                                        <div class="feedback-header">
                                            <h4>{{ feedback.subject }}</h4>
                                            <span class="feedback-type type-{{ feedback.type }}">
                                                {{ feedback.get_type_display }}
                                            </span>
                                        </div>
                                        <p class="feedback-message">{{ feedback.message }}</p>
                                        <div class="feedback-meta">
                                            <span class="feedback-date">
                                                {{ feedback.created_at|date:"M d, Y" }}
                                            </span>
                                            {% if feedback.is_anonymous %}
                                            <span class="anonymous-badge">Anonymous</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                    {% empty %}
                                    <div class="empty-state">
                                        <i class="fas fa-comments"></i>
                                        <h4>No feedback submitted yet</h4>
                                        <p>Your feedback will appear here once submitted</p>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-main">
                <div class="footer-brand">
                    <div class="footer-logo">
                        <img src="{% static 'assets/images/mgsalogo.jpg' %}" alt="MGSA Logo" />
                        <div class="logo-text">
                            <h3>Murti Guto Students Association</h3>
                            <p class="tagline">United in Education, Strong in Community</p>
                        </div>
                    </div>
                    <p class="footer-description">
                        Empowering Hararghe students through education, collaboration, and cultural unity. 
                        We build bridges for future leaders to connect, learn, and grow together as one community.
                    </p>
                </div>

                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#resources">Resources</a></li>
                        <li><a href="#contact">Contact</a></li>
                        <li><a href="{% url 'login-page' %}">Login/Register</a></li>
                    </ul>
                </div>

                <div class="footer-social">
                    <h4>Join Our Community</h4>
                    <p class="social-description">Connect with us on social media</p>
                    <div class="social-icons">
                        <a href="https://t.me/Ezu_SE" class="social-icon telegram" target="_blank">
                            <i class="fab fa-telegram"></i>
                        </a>
                        <a href="https://tiktok.com/@gamtaamurtiguto365" class="social-icon tiktok" target="_blank">
                            <i class="fab fa-tiktok"></i>
                        </a>
                        <a href="https://facebook.com/@gamtaamurtiguto365" class="social-icon facebook" target="_blank">
                            <i class="fab fa-facebook"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-copyright">
                    <span>&copy; 2025 Murti Guto Students Association. All rights reserved.</span>
                </div>
                <div class="footer-mission">
                    <span>Building Future Leaders Through Unity and Education</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Main Dashboard JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            // Dashboard Navigation
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            const dashboardSections = document.querySelectorAll('.dashboard-section');
            
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetSection = this.getAttribute('data-section');
                    
                    // Update active states
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show target section
                    dashboardSections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === targetSection) {
                            section.classList.add('active');
                        }
                    });
                    
                    // Add animation
                    const activeSection = document.getElementById(targetSection);
                    activeSection.classList.add('animate-fade-in');
                });
            });
            
            // Quick action cards
            const actionCards = document.querySelectorAll('.action-card');
            actionCards.forEach(card => {
                card.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetSection = this.getAttribute('data-section');
                    const targetLink = document.querySelector(`[data-section="${targetSection}"]`);
                    if (targetLink) targetLink.click();
                });
            });
            
            // Like functionality
            document.querySelectorAll('.like-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const postId = this.getAttribute('data-post-id');
                    const isLiked = this.classList.contains('liked');
                    
                    fetch(`/api/posts/${postId}/like/`, {
                        method: 'POST',
                        headers: {
                            'X-CSRFToken': getCookie('csrftoken'),
                            'X-Requested-With': 'XMLHttpRequest'
                        }
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            this.classList.toggle('liked', data.liked);
                            this.querySelector('.like-count').textContent = data.likes_count;
                            
                            // Add animation
                            if (data.liked) {
                                this.style.animation = 'heartBeat 0.6s ease';
                                setTimeout(() => this.style.animation = '', 600);
                            }
                        }
                    })
                    .catch(error => console.error('Error:', error));
                });
            });
            
            // Comment functionality
            document.querySelectorAll('.comment-toggle').forEach(button => {
                button.addEventListener('click', function() {
                    const postId = this.getAttribute('data-post-id');
                    const commentsSection = document.getElementById(`comments-${postId}`);
                    const isVisible = commentsSection.style.display !== 'none';
                    
                    commentsSection.style.display = isVisible ? 'none' : 'block';
                    
                    if (!isVisible && !commentsSection.dataset.loaded) {
                        loadComments(postId);
                    }
                });
            });
            
            // Comment forms
            document.querySelectorAll('.comment-form').forEach(form => {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const postId = this.getAttribute('data-post-id');
                    const content = this.querySelector('.comment-input').value.trim();
                    
                    if (!content) return;
                    
                    fetch(`/api/posts/${postId}/comments/`, {
                        method: 'POST',
                        headers: {
                            'X-CSRFToken': getCookie('csrftoken'),
                            'X-Requested-With': 'XMLHttpRequest',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ content: content })
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            this.querySelector('.comment-input').value = '';
                            loadComments(postId);
                            
                            // Update comment count
                            const commentBtn = document.querySelector(`[data-post-id="${postId}"].comment-toggle`);
                            commentBtn.querySelector('.comment-count').textContent = data.comments_count;
                        }
                    })
                    .catch(error => console.error('Error:', error));
                });
            });
            
            // Character counter for feedback
            const feedbackMessage = document.getElementById('feedback-message');
            const charCounter = document.getElementById('char-counter');
            
            if (feedbackMessage && charCounter) {
                feedbackMessage.addEventListener('input', function() {
                    charCounter.textContent = this.value.length;
                });
            }
            
            // Auto-hide messages
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                setTimeout(() => {
                    alert.style.opacity = '0';
                    setTimeout(() => alert.remove(), 300);
                }, 5000);
            });
            
            // Close alert buttons
            document.querySelectorAll('.close-alert').forEach(button => {
                button.addEventListener('click', function() {
                    this.closest('.alert').remove();
                });
            });
            
            // Helper functions
            function loadComments(postId) {
                fetch(`/api/posts/${postId}/comments/`)
                    .then(response => response.json())
                    .then(comments => {
                        const commentsList = document.getElementById(`comments-list-${postId}`);
                        commentsList.innerHTML = '';
                        
                        if (comments.length === 0) {
                            commentsList.innerHTML = `
                                <div class="no-comments">
                                    <i class="fas fa-comment-slash"></i>
                                    <p>No comments yet. Be the first to comment!</p>
                                </div>
                            `;
                        } else {
                            comments.forEach(comment => {
                                const commentElement = createCommentElement(comment);
                                commentsList.appendChild(commentElement);
                            });
                        }
                        
                        document.getElementById(`comments-${postId}`).dataset.loaded = 'true';
                    })
                    .catch(error => {
                        console.error('Error loading comments:', error);
                    });
            }
            
            function createCommentElement(comment) {
                const div = document.createElement('div');
                div.className = 'comment-item';
                div.innerHTML = `
                    <div class="comment-header">
                        <strong>${comment.author_name}</strong>
                        <span class="comment-date">${new Date(comment.created_at).toLocaleDateString()}</span>
                    </div>
                    <p class="comment-content">${comment.content}</p>
                `;
                return div;
            }
            
            function getCookie(name) {
                let cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    const cookies = document.cookie.split(';');
                    for (let i = 0; i < cookies.length; i++) {
                        const cookie = cookies[i].trim();
                        if (cookie.substring(0, name.length + 1) === (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
        });

        // Theme Toggle
        document.getElementById('theme-toggle').addEventListener('click', function() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update icon
            const icon = this.querySelector('i');
            icon.className = newTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
        });

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        const themeIcon = document.querySelector('#theme-toggle i');
        themeIcon.className = savedTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
    </script>
</body>
</html>